{"ast":null,"code":"import _regeneratorRuntime from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import auth from\"../services/authService\";import React from\"react\";import Form from\"../common/form\";import Joi from\"joi-browser\";import userService from\"../services/userService\";var Register=/*#__PURE__*/function(_Form){_inherits(Register,_Form);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{email:\"\",password:\"\",name:\"\"},errors:{}};_this.schema={email:Joi.string().min(5).max(255).required().label(\"Email\"),password:Joi.string().min(5).max(255).required().label(\"Password\"),name:Joi.string().min(3).max(40).required().label(\"Name\")};return _this;}_createClass(Register,[{key:\"doSubmit\",value:function(){var _doSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"submitted\");_context.prev=1;_context.next=4;return userService.register(this.state.data);case 4:response=_context.sent;console.log(response);auth.loginWithJwt(response.headers[\"x-auth-token\"]);window.location=\"/\";_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);errors=_objectSpread({},this.state.errors);errors.email=_context.t0.response.data;this.setState({errors:errors});case 15:case\"end\":return _context.stop();}}},_callee,this,[[1,10]]);}));function doSubmit(){return _doSubmit.apply(this,arguments);}return doSubmit;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Register\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},this.renderInput(\"name\",\"Name\"),this.renderInput(\"email\",\"Email\",\"email\"),this.renderInput(\"password\",\"Password\",\"password\"),this.renderButton(\"Register\")));}}]);return Register;}(Form);export default Register;","map":{"version":3,"sources":["/Users/parasvohra/Desktop/React Project/Ryyd/ryyd/src/components/register.jsx"],"names":["auth","React","Form","Joi","userService","Register","state","data","email","password","name","errors","schema","string","min","max","required","label","console","log","register","response","loginWithJwt","headers","window","location","setState","handleSubmit","renderInput","renderButton"],"mappings":"ooCAAA,MAAOA,CAAAA,IAAP,KAAiB,yBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,gBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,aAAhB,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,C,GAEMC,CAAAA,Q,yTACJC,K,CAAQ,CACNC,IAAI,CAAE,CAAEC,KAAK,CAAE,EAAT,CAAaC,QAAQ,CAAE,EAAvB,CAA2BC,IAAI,CAAE,EAAjC,CADA,CAENC,MAAM,CAAE,EAFF,C,OAKRC,M,CAAS,CACPJ,KAAK,CAAEL,GAAG,CAACU,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,QAA7B,GAAwCC,KAAxC,CAA8C,OAA9C,CADA,CAEPR,QAAQ,CAAEN,GAAG,CAACU,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,QAA7B,GAAwCC,KAAxC,CAA8C,UAA9C,CAFH,CAGPP,IAAI,CAAEP,GAAG,CAACU,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,GAAuCC,KAAvC,CAA6C,MAA7C,CAHC,C,oSAOPC,OAAO,CAACC,GAAR,CAAY,WAAZ,E,sCAGyBf,CAAAA,WAAW,CAACgB,QAAZ,CAAqB,KAAKd,KAAL,CAAWC,IAAhC,C,QAAjBc,Q,eACNH,OAAO,CAACC,GAAR,CAAYE,QAAZ,EACArB,IAAI,CAACsB,YAAL,CAAkBD,QAAQ,CAACE,OAAT,CAAiB,cAAjB,CAAlB,EACAC,MAAM,CAACC,QAAP,CAAkB,GAAlB,C,iFAEMd,M,kBAAc,KAAKL,KAAL,CAAWK,M,EAC/BA,MAAM,CAACH,KAAP,CAAe,YAAGa,QAAH,CAAYd,IAA3B,CACA,KAAKmB,QAAL,CAAc,CAAEf,MAAM,CAANA,MAAF,CAAd,E,8LAIK,CACP,mBACE,4CACE,yCADF,cAEE,4BAAM,QAAQ,CAAE,KAAKgB,YAArB,EACG,KAAKC,WAAL,CAAiB,MAAjB,CAAyB,MAAzB,CADH,CAEG,KAAKA,WAAL,CAAiB,OAAjB,CAA0B,OAA1B,CAAmC,OAAnC,CAFH,CAGG,KAAKA,WAAL,CAAiB,UAAjB,CAA6B,UAA7B,CAAyC,UAAzC,CAHH,CAIG,KAAKC,YAAL,CAAkB,UAAlB,CAJH,CAFF,CADF,CAWD,C,sBAvCoB3B,I,EA0CvB,cAAeG,CAAAA,QAAf","sourcesContent":["import auth from \"../services/authService\";\nimport React from \"react\";\nimport Form from \"../common/form\";\nimport Joi from \"joi-browser\";\nimport userService from \"../services/userService\";\n\nclass Register extends Form {\n  state = {\n    data: { email: \"\", password: \"\", name: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    email: Joi.string().min(5).max(255).required().label(\"Email\"),\n    password: Joi.string().min(5).max(255).required().label(\"Password\"),\n    name: Joi.string().min(3).max(40).required().label(\"Name\"),\n  };\n\n  async doSubmit() {\n    console.log(\"submitted\");\n\n    try {\n      const response = await userService.register(this.state.data);\n      console.log(response);\n      auth.loginWithJwt(response.headers[\"x-auth-token\"]);\n      window.location = \"/\";\n    } catch (ex) {\n      const errors = { ...this.state.errors };\n      errors.email = ex.response.data;\n      this.setState({ errors });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <h1>Register</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"name\", \"Name\")}\n          {this.renderInput(\"email\", \"Email\", \"email\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderButton(\"Register\")}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}